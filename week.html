<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no" />
	<meta charset="utf-8">
	<meta name="format-detection" content="telephone=no,email=no,adress=no">

	<!--公共样式-->
	<link rel="stylesheet" href="assets/css/reset.css" />

	<!--主要样式-->
	<link rel="stylesheet" type="text/css" href="assets/css/simple-calendar.css">
	<link rel="stylesheet" href="assets/css/calendar.css" />

	<title>日程管理</title>
	<style>
		.sc-body{
				height: 1rem;
			}
			.sc-body.showmonth6{
				height: 1rem;
			}
		</style>
</head>

<body class="index">
	<div id="tip">
		<img src="assets/images/icon05.png" alt="">
		<p>请注意：以下为<span></span>、<span>陈曼嫣</span>的日程信息</p>
		<i></i>
	</div>
	<div class="inner">
		<div id='calendar' class="sc-calendar">
			<div class="sc-header">
				<div class="sc-title">
					<div class="month">
						<div class="arrow sc-mleft"></div>
						<div class="monthdiv">
							<span class="sc-select-year" style="visibility: hidden"></span>
							<span class="sc-select-month" style="visibility: hidden"></span>
							第<span class="sc-select-week" name=""></span>周
						</div>
						<div class="arrow sc-mright"></div>
					</div>
					<div class="todaySearch">
						<a href="search.html"></a>
						<span class="today"></span>
					</div>
				</div>
				<div class="sc-week"></div>
			</div>
			<div class="sc-body">
				<div class="sc-days"></div>
			</div>
		</div>
		<div class="announcement">
			<div class="scroll">
				<ul class="matter">
				</ul>
			</div>
		</div>
	</div>
	<div class="footer">
		<ul>
			<li>
				<a href="schedule-add.html">
					<img src="assets/images/add.png" alt="">
					<span>新增日程</span>
				</a>
			</li>
			<li>
				<img src="assets/images/month.png" alt="">
				<span>月</span>
			</li>
			<li>
				<a href="">
					<img src="assets/images/week01.png" alt="">
					<span>周</span>
				</a>
			</li>
		</ul>
	</div>
	<script type="text/javascript" src="assets/js/jquery-1.7.2.min.js"></script>
	<script type="text/javascript" src="assets/js/simple-calendar.js"></script>
	<script type="text/javascript" src="assets/js/hammer-2.0.8-min.js"></script>
	<script type="text/javascript">
		var myCalendar = new SimpleCalendar('#calendar', {
			view: 'week'
		});
		$(".mark").html("");
		$(function () {
			var monthCH = $('.sc-select-month').text();
			$(".sc-mleft").click(function () {
				myCalendar.subWeek();
			})
			$(".sc-mright").click(function () {
				myCalendar.addWeek();
			});
		});
		$(".sc-title .todaySearch span").on("click", function () {
			var myCalendar = new SimpleCalendar('#calendar');
			$(".sc-week-item").each(function () {
				if ($(this).html() == "undefined") {
					$(this).remove();
				}
			})
			// $(".sc-item ").css("background","none");
			// $(".sc-today").css("background","url(assets/images/blueBg.png) center 0 no-repeat");
			//     $(".sc-today").css("background-size","0.78rem 0.78rem");
			//     $(".sc-today .day").css("color","#fff");
			//     $(".sc-today .lunar-day").css("color","#fff");
		})
		//滑动切换
		var myElement = document.getElementById('calendar');
		var hammer = new Hammer(myElement);
		hammer.on("swipeleft", function (ev) {
			myCalendar.addMonth();
			// $(".sc-item ").css("background","none");
			// $(".sc-today").css("background","url(assets/images/orangeBg.png) center 0 no-repeat");
			// $(".sc-today").css("background-size","0.78rem 0.78rem");
			// $(".sc-today .day").css("color","rgba(0,0,0,.9)");
			// $(".sc-today .lunar-day").css("color","rgba(0,0,0,.5)");
		});
		hammer.on("swiperight", function (ev) {
			myCalendar.subMonth();
			// $(".sc-item ").css("background","none");
			// $(".sc-today").css("background","url(assets/images/orangeBg.png) center 0 no-repeat");
			//     $(".sc-today").css("background-size","0.78rem 0.78rem");
			//     $(".sc-today .day").css("color","rgba(0,0,0,.9)");
			//     $(".sc-today .lunar-day").css("color","rgba(0,0,0,.5)");
		});

		//添加标记
		var mark = {
			'2018-11-14': [
				{ title: '接管组专题会议', startTime: '09:00', endTime: '10:30', name: '韩聪', nameClass: 'other', typeClass: 'blue', type: '会议', level: '【重要】', people: '包国峰、陈立强、陈雅涵、包国峰、陈立强、陈雅涵', liType: '', startDate: '', endDate: '' },
				{ title: '产品需求沟通会产品需求沟通会产品需求沟通会产品需求沟通会', startTime: '18:00', endTime: '19:30', name: '张晓晓', nameClass: 'other', typeClass: 'purple', type: '培训', level: '', people: '包国峰、陈立强', liType: '', startDate: '', endDate: '' }, { title: '接管组专题会议', startTime: '09:00', endTime: '10:30', name: '韩聪', nameClass: '', typeClass: 'orange', type: '出差', level: '【重要】', people: '包国峰、陈立强、陈雅涵、包国峰、陈立强、陈雅涵', liType: '', startDate: '', endDate: '' },
				{ title: '产品需求沟通会产品需求沟通会产品需求沟通会产品需求沟通会', startTime: '18:00', endTime: '19:30', name: '张晓晓', nameClass: '', typeClass: 'purple', type: '培训', level: '', people: '包国峰、陈立强', liType: '', startDate: '', endDate: '' }, { title: '接管组专题会议', startTime: '09:00', endTime: '10:30', name: '韩聪', typeClass: 'green', type: '休假', level: '【重要】', people: '包国峰、陈立强、陈雅涵、包国峰、陈立强、陈雅涵', liType: '', startDate: '', endDate: '' },
				{ title: '产品需求沟通会产品需求沟通会产品需求沟通会产品需求沟通会', startTime: '18:00', endTime: '19:30', name: '张晓晓', nameClass: 'other', typeClass: 'black', type: '其他', level: '', people: '包国峰、陈立强', liType: 'crossDay', startDate: '2018-08-13', endDate: '2018-08-17' }, { title: '产品需求沟通会产品需求沟通会产品需求沟通会产品需求沟通会', startTime: '18:00', endTime: '19:30', name: '张晓晓', nameClass: 'other', typeClass: 'green', type: '休假', level: '', people: '包国峰、陈立强', liType: 'crossDay', startDate: '2018-08-13', endDate: '2018-08-17' }],
		};
		myCalendar._defaultOptions.mark = mark;
		myCalendar.update();
		//显示当天的活动在初始化mark之后
		//初始化今天的活动
		announceList($('.sc-today'));
		//有标记的日期点击事件
		$('#calendar').on("click", '.sc-selected', function () {
			announceList($(this));
		});

		//显示选择日期当天的活动
		function announceList(v) {
			if (v.children().hasClass('sc-mark-show')) {
				var year = $('.sc-select-year').text();
				var monthCH = $('.sc-select-month').text();
				var day = v.children()[1].innerText;
				var month = SimpleCalendar.prototype.languageData.months_CH.indexOf(monthCH) + 1;
				var date = year + '-' + month + '-' + day;
				var content = mark[date];
				var matterHtml = '';
				for (var i = 0; i < content.length; i++) {
					matterHtml += '<li class="announceItem special ' + content[i].liType + '"><a href="schedule-detail.html"><div class="time"><div class="top"><span class="crossday">' + content[i].startDate + '</span><span>' + content[i].startTime + '</span></div><i></i><div class="bottom"><span class="crossday">' + content[i].endDate + '</span><span>' + content[i].endTime + '</span></div></div><div class="conDetail"><div class="one"><img class="person" src="assets/images/icon04.png" alt=""><span class="name ' + content[i].nameClass + '">' + content[i].name + '</span><span class="type ' + content[i].typeClass + '">' + content[i].type + '</span></div><div class="two"><span class="level">' + content[i].level + '</span><span class="title">' + content[i].title + '</span></div><div class="three"><div class="people">' + content[i].people + '</div></div></div></a></li>';
				}
				$('.matter').html(matterHtml);
				for (var i = 0; i < $(".matter .crossDay").length; i++) {
					$(".matter .crossDay").eq(0).css("borderTop", "0.15rem solid #f5f5f5");
				}
			} else {
				var matterHtml = ''
				matterHtml += '<li class="announceItem"><div><img src="assets/images/tip.png" alt=""><p class="announceContent">暂无事件</p></div></li>';
				$('.matter').html(matterHtml);
			}
		}
	</script>
	<script>
		$(function () {
			// 计算事件列表容器高度
			var windowHeight = $(window).height();
			var calendarHeight = $("#calendar").height();
			var footerHeight = $(".footer").height();
			var tipHeight = $("#tip").height();
			$(".announcement").css("height", windowHeight - calendarHeight - footerHeight - tipHeight + "px");
			//他人日程管理上方提示
			$("#tip i").on("click", function () {
				$("#tip").hide();
				var anHeight = $(".announcement").outerHeight();
				var tipHeight = $("#tip").height();
				$(".announcement").css("height", anHeight + tipHeight + "px");
			});
			// $(".sc-nextmonth").on("click",function(){
			//     // alert(1);
			//     myCalendar.addMonth();
			//     var year = $('.sc-select-year').text();
			//     var monthCH = $('.sc-select-month').text();
			//     var month = SimpleCalendar.prototype.languageData.months_CH.indexOf(monthCH)+1;
			//     console.log(month)
			// })
		})
	</script>
</body>

</html>